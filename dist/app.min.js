var MyApp=angular.module("MyApp",["ui.router"]);MyApp.config(["$stateProvider","$urlRouterProvider",function(t,r){r.otherwise("/intro"),t.state("main",{url:"/",templateUrl:"templates/main/main.html",controller:"MainController",controllerAs:"main"}).state("main.intro",{url:"intro",templateUrl:"templates/intro/intro.html",controller:"IntroController",controllerAs:"introCtrl"}).state("main.login",{url:"login",templateUrl:"templates/login/login.html"}).state("main.other",{url:"other",templateUrl:"templates/other/other.html"}).state("stuff",{url:"/stuff",templateUrl:"templates/stuff/stuff.html",controller:"StuffController",controllerAs:"stuffCtrl"})}]),MyApp.service("ApiService",["$http",function(t){this.syncMethod=function(){return 0},this.getThings=function(){return t.get("/thing").then(function(t){return t.data})["catch"](function(t){return console.error("Error ApiService getThings ",t),{}})},this.makeMove=function(r,o){return t.post("/move",r).success(function(t,r,e,a){o(t)}).error(function(t,r,o,e){console.error("Error ApiService makeMove ",t)})},this.updateBoard=function(r){return t.get("/move").success(function(t,o,e,a){r(t)}).error(function(t,r,o,e){console.error("Error ApiService updateBoard ",t)})}}]),MyApp.controller("IntroController",["$scope","ApiService",function(t,r){function o(t,r){var o="abcdefgh",e="87654321";return o.charAt(t-1)+e.charAt(r-1)}function e(t){for(var r,o=t.charAt(0),e=t.charAt(1),a="abcdefgh",n=0;n<8;n++)if(a.charAt(n)==o){r=n;break}var i=8-e;return{x:r,y:i}}function a(){n(),i("black"),i("white"),t.moveNum=1}function n(){for(var r=0;r<8;r++)for(var o=0;o<8;o++)t.board[r][o]=""}function i(r){if("black"==r||"white"==r){var o="black"==r?0:7;t.board[0][o]=t.board[7][o]="black"==r?"♜":"♖",t.board[1][o]=t.board[6][o]="black"==r?"♞":"♘",t.board[2][o]=t.board[5][o]="black"==r?"♝":"♗",t.board[3][o]="black"==r?"♛":"♕",t.board[4][o]="black"==r?"♚":"♔",o="black"==r?1:6;for(var e=0;e<8;e++)t.board[e][o]="black"==r?"♟":"♙"}}function l(){r.updateBoard(s)}function s(r){r.moves.length>=t.moveNum&&(t.voted=!1,t.start="",t.end="",t.showStart="",t.showEnd=""),d(r.moves);var o=t.moveNum%2==0?"black":"white";t.color==o?t.availableMoves=r.availableMoves:t.availableMoves="",t.notification=r.notification,t.votes=r.votes}function d(t){a(),t.sort(function(t,r){return t.position-r.position});for(var r=0;r<t.length;r++)f(t[r])}function u(r,o){"e8"==r.start&&"c8"==r.end&&"king"==o&&(t.board[3][0]=t.board[0][0],t.board[0][0]=""),"e8"==r.start&&"g8"==r.end&&"king"==o&&(t.board[5][0]=t.board[7][0],t.board[7][0]=""),"e1"==r.start&&"c1"==r.end&&"king"==o&&(t.board[3][7]=t.board[0][7],t.board[0][7]=""),"e1"==r.start&&"g1"==r.end&&"king"==o&&(t.board[3][7]=t.board[0][7],t.board[0][7]=""),"castling"==r.other&&"a8"==r.start&&"d8"==r.end&&"rook"==o&&(t.board[2][0]=t.board[4][0],t.board[4][0]=""),"castling"==r.other&&"h8"==r.start&&"f8"==r.end&&"rook"==o&&(t.board[6][0]=t.board[4][0],t.board[4][0]=""),"castling"==r.other&&"a1"==r.start&&"d1"==r.end&&"rook"==o&&(t.board[2][7]=t.board[4][7],t.board[4][7]=""),"castling"==r.other&&"h1"==r.start&&"f1"==r.end&&"rook"==o&&(t.board[6][7]=t.board[4][7],t.board[4][7]="")}function c(r,o){if("♟"==o||"♙"==o){var a=e(r.start),n=e(r.end);t.board[n.x][n.y]||1!=Math.abs(a.x-n.x)||1!=Math.abs(a.y-n.y)||(t.board[n.x][a.y]="")}}function v(r){var o=(e(r.start),e(r.end)),a=t.board[o.x][o.y];7==o.y&&"♟"==a&&("queen"==r.other&&(t.board[o.x][o.y]="♛"),"knight"==r.other&&(t.board[o.x][o.y]="♞"),"rook"==r.other&&(t.board[o.x][o.y]="♜"),"bishop"==r.other&&(t.board[o.x][o.y]="♝")),0==o.y&&"♙"==a&&("queen"==r.other&&(t.board[o.x][o.y]="♕"),"knight"==r.other&&(t.board[o.x][o.y]="♘"),"rook"==r.other&&(t.board[o.x][o.y]="♖"),"bishop"==r.other&&(t.board[o.x][o.y]="♗"))}function f(r){var o=e(r.start),a=e(r.end),n=t.board[o.x][o.y];c(r,n),t.board[o.x][o.y]="",t.board[a.x][a.y]=n;var i="";"♚"!=n&&"♔"!=n||(i="king"),"♜"!=n&&"♖"!=n||(i="rook"),i&&u(r,i),v(r),t.moveNum++}function h(t){}function b(r,o){var a=e(t.start);if(1==a.y&&0==o&&"♙"==t.board[a.x][a.y]||6==a.y&&7==o&&"♟"==t.board[a.x][a.y])return t.moveOptions.push({type:"queen",title:"Promote to queen"},{type:"knight",title:"Promote to knight"},{type:"rook",title:"Promote to rook"},{type:"bishop",title:"Promote to bishop"}),!0;for(var n="",i=0;i<t.availableMoves.length;i++)if(a=e(t.availableMoves[i].start),"♚"==t.board[a.x][a.y]||"♔"==t.board[a.x][a.y])for(var l=0;l<t.availableMoves[i].end.length;l++){var s=e(t.availableMoves[i].end[l]);a.x-s.x==2&&(n=n?"both":"left"),s.x-a.x==2&&(n=n?"both":"right")}if(n&&(a=e(t.start),"♜"==t.board[a.x][a.y]||"♖"==t.board[a.x][a.y])){if(("left"==n||"both"==n)&&0==a.x&&3==r)return t.moveOptions.push({type:"castling",title:"Perform castling"},{type:"",title:"Leave as it is"}),!0;if(("right"==n||"both"==n)&&7==a.x&&5==r)return t.moveOptions.push({type:"castling",title:"Perform castling"},{type:"",title:"Leave as it is"}),!0}return!1}function p(r,o){if(t.voted)return!1;for(var a=0;a<t.availableMoves.length;a++){var n=e(t.availableMoves[a].start);if(n.x==r&&n.y==o)return!0}return!1}function m(r,o){if(t.voted)return!1;for(var a=e(t.start),n=0;n<t.availableMoves.length;n++){var i=e(t.availableMoves[n].start);if(i.x==a.x&&i.y==a.y){for(var l=0;l<t.availableMoves[n].end.length;l++){var s=e(t.availableMoves[n].end[l]);if(s.x==r&&s.y==o)return!0}return!1}}return!1}t.start="",t.end="",t.showStart="",t.showEnd="",t.moveOptions=[],t.board=new Array(8);for(var y=0;y<8;y++)t.board[y]=new Array(8);t.availableMoves=[],t.color=Math.random()<.5?"black":"white",t.voted=!1,l(),setInterval(l,1e3),t.clickCell=function(e,a){t.end||(t.start?m(e-1,a-1)&&(b(e-1,a-1)?t.end=o(e,a):(r.makeMove({start:t.start,end:o(e,a)},h),t.voted=!0,t.end=o(e,a),t.showStart=t.start,t.showEnd=t.end)):p(e-1,a-1)&&(t.start=o(e,a)))},t.setOther=function(o){t.start&&t.end&&(r.makeMove({start:t.start,end:t.end,other:o},h),t.moveOptions=[],t.voted=!0,t.showStart=t.start,t.showEnd=t.end)},t.chooseColor=function(r,a){var n=r%2==a%2?"square-white":"square-black";if(t.showStart==o(r,a)||t.showEnd==o(r,a))return"square-selected";if(!t.start||t.voted)return n;for(var i=-1,l=0;l<t.availableMoves.length;l++)if(t.availableMoves[l].start==t.start){i=l;break}if(i==-1)return n;for(var l=0;l<t.availableMoves[i].end.length;l++){var s=e(t.availableMoves[i].end[l]);if(r-1==s.x&&a-1==s.y)return n+="-valid"}return n+="-invalid"},t.turnMessage=function(){var r=t.moveNum%2==0?"black":"white";return r==t.color?"Your turn.":"Opponent's turn."},t.notateMove=function(t){return t.other?t.start+"-"+t.end+": "+t.other:t.start+"-"+t.end},t.showMove=function(r){t.showStart=r.start,t.showEnd=r.end},t.showYourMove=function(){t.showStart=t.start,t.showEnd=t.end},t.voteHighlighter=function(r){return r.start==t.start&&r.end==t.end?"yourVote":"highlight"}}]),MyApp.directive("navTop",function(){return{templateUrl:"templates/layout-directives/nav-top2.html"}}),MyApp.directive("verticalMenu",["$document","$window",function(t,r){return{templateUrl:"templates/layout-directives/vertical-menu.html",link:function(t,r,o){}}}]),MyApp.controller("LoginController",function(){}),MyApp.controller("MainController",["$scope",function(t){t.doStuff=function(){return"stuff"}}]),MyApp.controller("OtherController",["$scope",function(t){t.filter=!0,t.toggleFilter=function(){t.filter=!t.filter}}]),MyApp.controller("StuffController",function(){});
//# sourceMappingURL=app.min.js.map
