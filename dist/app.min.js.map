{"version":3,"sources":["app.min.js"],"names":["MyApp","angular","module","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","controllerAs","service","$http","this","syncMethod","getThings","get","then","response","data","err","console","error","makeMove","move","hookEvent","post","success","status","headers","updateBoard","$scope","ApiService","convertFormat","x","y","letters","numbers","charAt","toArrayCoordinates","chessNotation","letter","number","i","initializeBoard","clearBoard","placeFigures","moveNum","board","color","row","fetchMoves","handleMoves","moves","length","voted","start","end","showStart","showEnd","rebuildBoard","colorOfTurn","availableMoves","notification","votes","sort","a","b","position","castlingLogic","figure","other","enPassantLogic","coordStart","coordEnd","Math","abs","promotionLogic","castler","waitForVotes","moveNeedsAdditionalInfo","endX","endY","moveOptions","push","type","title","mayCastle","j","canClickStart","coord","canClickEnd","startCoord","endCoord","Array","random","setInterval","clickCell","setOther","moveOption","chooseColor","result","index","turnMessage","notateMove","vote","showMove","showYourMove","voteHighlighter","directive","$document","$window","link","scope","element","attrs","doStuff","filter","toggleFilter"],"mappings":"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","file":"app.min.js","sourcesContent":["var MyApp = angular.module(\"MyApp\", [\"ui.router\"]);\n\nMyApp.config([\"$stateProvider\", \"$urlRouterProvider\", function($stateProvider, $urlRouterProvider) {\n  $urlRouterProvider.otherwise(\"/intro\");\n\n  $stateProvider\n    .state(\"main\", {\n      url: \"/\",\n      templateUrl: \"templates/main/main.html\",\n      controller: \"MainController\",\n      controllerAs: \"main\"\n    })\n    .state(\"main.intro\", {\n      url: \"intro\",\n      templateUrl: \"templates/intro/intro.html\",\n      controller: \"IntroController\",\n      controllerAs: \"introCtrl\"\n    })\n    .state(\"main.login\", {\n      url: \"login\",\n      templateUrl: \"templates/login/login.html\",\n    })\n    .state(\"main.other\", {\n      url: \"other\",\n      templateUrl: \"templates/other/other.html\",\n    })\n    .state(\"stuff\", {\n      url: \"/stuff\",\n      templateUrl: \"templates/stuff/stuff.html\",\n      controller: \"StuffController\",\n      controllerAs: \"stuffCtrl\"\n    })\n}]);\n\nMyApp.service(\"ApiService\", [\"$http\", function($http) {\n\n  this.syncMethod = function() {\n    return 0;\n  }\n\n  this.getThings = function() {\n    return $http.get(\"/thing\")\n      .then(function (response) {\n        return response.data;\n      })\n      .catch(function (err) {\n        console.error(\"Error ApiService getThings \", err);\n        return {};\n      })\n  }\n  \n  this.makeMove = function(move, hookEvent) {\n    return $http.post(\"/move\", move)\n      .success(function (data, status, headers, config) {\n        hookEvent(data);\n      })\n      .error(function (data, status, headers, config) {\n        console.error(\"Error ApiService makeMove \", data);\n      })\n  }\n  \n  this.updateBoard = function(hookEvent) {\n    return $http.get(\"/move\")\n      .success(function (data, status, headers, config) {\n        hookEvent(data);\n      })\n      .error(function (data, status, headers, config) {\n        console.error(\"Error ApiService updateBoard \", data);\n      })\n  }\n\n}])\n\nMyApp.controller(\"IntroController\", [\"$scope\", \"ApiService\", function($scope, ApiService) {\n  $scope.start = \"\";\n  $scope.end = \"\";\n  $scope.showStart = \"\";\n  $scope.showEnd = \"\";\n  $scope.moveOptions = [];\n  $scope.board = new Array(8);\n  for (var i = 0; i < 8; i++) {\n    $scope.board[i] = new Array(8);\n  }\n  $scope.availableMoves = [];\n  $scope.color = (Math.random() < 0.5) ? \"black\" : \"white\";\n  $scope.voted = false;\n  \n  fetchMoves();\n  setInterval(fetchMoves, 1000);\n  \n  function convertFormat(x, y) {\n    var letters = \"abcdefgh\";\n    var numbers = \"87654321\";\n    return letters.charAt(x - 1) + numbers.charAt(y - 1);\n  }\n\n  function toArrayCoordinates(chessNotation) {\n    var letter = chessNotation.charAt(0);\n    var number = chessNotation.charAt(1);\n    var letters = \"abcdefgh\";\n    \n    var x;\n    for (var i = 0; i < 8; i++) {\n      if (letters.charAt(i) == letter) {\n        x = i;\n        break;\n      }\n    }\n    var y = 8 - number;\n    return { x: x, y: y};\n  }\n\n  function initializeBoard() {\n    clearBoard();\n    placeFigures(\"black\");\n    placeFigures(\"white\");\n    $scope.moveNum = 1;\n  }\n\n  function clearBoard() {\n    for (var x = 0; x < 8; x++) {\n      for (var y = 0; y < 8; y++) {\n        $scope.board[x][y] = \"\";\n      }\n    }\n  }\n  \n  function placeFigures(color) {\n    if (color != \"black\" && color != \"white\") {\n      return;\n    }\n    \n    var row = (color == \"black\" ? 0 : 7);\n    $scope.board[0][row] = $scope.board[7][row] = (color == \"black\" ? \"\\u265c\" : \"\\u2656\");\n    $scope.board[1][row] = $scope.board[6][row] = (color == \"black\" ? \"\\u265e\" : \"\\u2658\");\n    $scope.board[2][row] = $scope.board[5][row] = (color == \"black\" ? \"\\u265d\" : \"\\u2657\");\n    $scope.board[3][row] = (color == \"black\" ? \"\\u265b\" : \"\\u2655\");\n    $scope.board[4][row] = (color == \"black\" ? \"\\u265a\" : \"\\u2654\");\n    \n    row = (color == \"black\" ? 1 : 6);\n    for (var i = 0; i < 8; i++) {\n      $scope.board[i][row] = (color == \"black\" ? \"\\u265f\" : \"\\u2659\");\n    }\n  }\n\n  function fetchMoves() {\n    ApiService.updateBoard(handleMoves);\n  }\n  \n  function handleMoves(data) {\n    if (data.moves.length >= $scope.moveNum) {\n      $scope.voted = false;\n      $scope.start = \"\";\n      $scope.end = \"\";\n      $scope.showStart = \"\";\n      $scope.showEnd = \"\";\n    }\n    rebuildBoard(data.moves);\n    var colorOfTurn = ($scope.moveNum % 2 == 0) ? \"black\" : \"white\";\n    if ($scope.color == colorOfTurn) {\n      $scope.availableMoves = data.availableMoves;\n    } else {\n      $scope.availableMoves = \"\";\n    }\n    $scope.notification = data.notification;\n    $scope.votes = data.votes;\n  }\n  \n  function rebuildBoard(moves) {\n    initializeBoard();\n    moves.sort(function(a,b){return a.position - b.position;});\n    for (var i = 0; i < moves.length; i++) {\n      makeMove(moves[i]);\n    }\n  }\n\n  function castlingLogic(move, figure) {\n    if (move.start == \"e8\" && move.end == \"c8\" && figure == \"king\") {\n      $scope.board[3][0] = $scope.board[0][0];\n      $scope.board[0][0] = \"\";\n    }\n    if (move.start == \"e8\" && move.end == \"g8\" && figure == \"king\") {\n      $scope.board[5][0] = $scope.board[7][0];\n      $scope.board[7][0] = \"\";\n    }\n    if (move.start == \"e1\" && move.end == \"c1\" && figure == \"king\") {\n      $scope.board[3][7] = $scope.board[0][7];\n      $scope.board[0][7] = \"\";\n    }\n    if (move.start == \"e1\" && move.end == \"g1\" && figure == \"king\") {\n      $scope.board[3][7] = $scope.board[0][7];\n      $scope.board[0][7] = \"\";\n    }\n    if (move.other == \"castling\" && move.start == \"a8\" && move.end == \"d8\" && figure == \"rook\") {\n      $scope.board[2][0] = $scope.board[4][0];\n      $scope.board[4][0] = \"\";\n    }\n    if (move.other == \"castling\" && move.start == \"h8\" && move.end == \"f8\" && figure == \"rook\") {\n      $scope.board[6][0] = $scope.board[4][0];\n      $scope.board[4][0] = \"\";\n    }\n    if (move.other == \"castling\" && move.start == \"a1\" && move.end == \"d1\" && figure == \"rook\") {\n      $scope.board[2][7] = $scope.board[4][7];\n      $scope.board[4][7] = \"\";\n    }\n    if (move.other == \"castling\" && move.start == \"h1\" && move.end == \"f1\" && figure == \"rook\") {\n      $scope.board[6][7] = $scope.board[4][7];\n      $scope.board[4][7] = \"\";\n    }\n  }\n  \n  function enPassantLogic(move, figure) {\n    if (figure != \"\\u265f\" && figure != \"\\u2659\") {\n      return;\n    }\n    var coordStart = toArrayCoordinates(move.start);\n    var coordEnd = toArrayCoordinates(move.end);\n    if (!$scope.board[coordEnd.x][coordEnd.y] &&\n        Math.abs(coordStart.x - coordEnd.x) == 1 &&\n        Math.abs(coordStart.y - coordEnd.y) == 1) {\n      $scope.board[coordEnd.x][coordStart.y] = \"\";\n    }\n  }\n\n  function promotionLogic(move) {\n    var coordStart = toArrayCoordinates(move.start);\n    var coordEnd = toArrayCoordinates(move.end);\n    var figure = $scope.board[coordEnd.x][coordEnd.y];\n    if (coordEnd.y == 7 && figure == \"\\u265f\") {\n      if (move.other == \"queen\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u265b\";\n      if (move.other == \"knight\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u265e\";\n      if (move.other == \"rook\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u265c\";\n      if (move.other == \"bishop\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u265d\";\n    }\n    if (coordEnd.y == 0 && figure == \"\\u2659\") {\n      if (move.other == \"queen\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u2655\";\n      if (move.other == \"knight\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u2658\";\n      if (move.other == \"rook\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u2656\";\n      if (move.other == \"bishop\")  $scope.board[coordEnd.x][coordEnd.y] = \"\\u2657\";\n    }\n  }\n\n  function makeMove(move) {\n    var coordStart = toArrayCoordinates(move.start);\n    var coordEnd = toArrayCoordinates(move.end);\n    var figure = $scope.board[coordStart.x][coordStart.y];\n    enPassantLogic(move, figure);\n    $scope.board[coordStart.x][coordStart.y] = \"\";\n    $scope.board[coordEnd.x][coordEnd.y] = figure;\n    var castler = \"\";\n    if (figure == \"\\u265a\" || figure == \"\\u2654\") castler = \"king\";\n    if (figure == \"\\u265c\" || figure == \"\\u2656\") castler = \"rook\";\n    if (castler)  castlingLogic(move, castler);\n    promotionLogic(move);\n    $scope.moveNum++;\n  }\n  \n  function waitForVotes(move) {\n  }\n\n  function moveNeedsAdditionalInfo(endX, endY) {\n    var coordStart = toArrayCoordinates($scope.start);\n    if ((coordStart.y == 1 && endY == 0 && $scope.board[coordStart.x][coordStart.y] == \"\\u2659\") ||\n        (coordStart.y == 6 && endY == 7 && $scope.board[coordStart.x][coordStart.y] == \"\\u265f\")) {\n      $scope.moveOptions.push(\n        {type: \"queen\", title: \"Promote to queen\"},\n        {type: \"knight\", title: \"Promote to knight\"},\n        {type: \"rook\", title: \"Promote to rook\"},\n        {type: \"bishop\", title: \"Promote to bishop\"}\n      );\n      return true;\n    }\n    var mayCastle = \"\";\n    for (var i = 0; i < $scope.availableMoves.length; i++) {\n      coordStart = toArrayCoordinates($scope.availableMoves[i].start);\n      if ($scope.board[coordStart.x][coordStart.y] != \"\\u265a\" &&\n          $scope.board[coordStart.x][coordStart.y] != \"\\u2654\") {\n        continue;\n      }\n      for (var j = 0; j < $scope.availableMoves[i].end.length; j++) {\n        var coordEnd = toArrayCoordinates($scope.availableMoves[i].end[j]);\n        if (coordStart.x - coordEnd.x == 2) {\n          mayCastle = mayCastle ? \"both\" : \"left\";\n        }\n        if (coordEnd.x - coordStart.x == 2) {\n          mayCastle = mayCastle ? \"both\" : \"right\";\n        }\n      }\n    }\n    if (mayCastle) {\n      coordStart = toArrayCoordinates($scope.start);\n      if ($scope.board[coordStart.x][coordStart.y] == \"\\u265c\" ||\n          $scope.board[coordStart.x][coordStart.y] == \"\\u2656\") {\n        if (mayCastle == \"left\" || mayCastle == \"both\") {\n          if (coordStart.x == 0 && endX == 3) {\n            $scope.moveOptions.push(\n              {type: \"castling\", title: \"Perform castling\"},\n              {type: \"\", title: \"Leave as it is\"}\n            );\n            return true;\n          }\n        }\n        if (mayCastle == \"right\" || mayCastle == \"both\") {\n          if (coordStart.x == 7 && endX == 5) {\n            $scope.moveOptions.push(\n              {type: \"castling\", title: \"Perform castling\"},\n              {type: \"\", title: \"Leave as it is\"}\n            );\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  \n  function canClickStart(x, y) {\n    if ($scope.voted) {\n      return false;\n    }\n    for (var i = 0; i < $scope.availableMoves.length; i++) {\n      var coord = toArrayCoordinates($scope.availableMoves[i].start);\n      if (coord.x == x && coord.y == y) {\n        return true;\n      }\n    }\n    return false;\n  }\n  \n  function canClickEnd(x, y) {\n    if ($scope.voted) {\n      return false;\n    }\n    var startCoord = toArrayCoordinates($scope.start);\n    for (var i = 0; i < $scope.availableMoves.length; i++) {\n      var coord = toArrayCoordinates($scope.availableMoves[i].start);\n      if (coord.x == startCoord.x && coord.y == startCoord.y) {\n        for (var j = 0; j < $scope.availableMoves[i].end.length; j++) {\n          var endCoord = toArrayCoordinates($scope.availableMoves[i].end[j]);\n          if (endCoord.x == x && endCoord.y == y) {\n            return true;\n          }\n        }\n        return false;\n      }\n    }\n    return false;\n  }\n\n  $scope.clickCell = function(x, y){\n    if ($scope.end) {\n      return;\n    }\n    if ($scope.start) {\n      if (canClickEnd(x - 1, y - 1)) {\n        if (moveNeedsAdditionalInfo(x - 1, y - 1)) {\n          $scope.end = convertFormat(x, y);\n        } else {\n          ApiService.makeMove({\n            start: $scope.start,\n            end: convertFormat(x, y)\n          }, waitForVotes);\n          $scope.voted = true;\n          $scope.end = convertFormat(x, y);\n          $scope.showStart = $scope.start;\n          $scope.showEnd = $scope.end;\n        }\n      }\n    } else {\n      if (canClickStart(x - 1, y - 1)) {\n        $scope.start = convertFormat(x, y);\n      }\n    }\n  }\n  \n  $scope.setOther = function(moveOption){\n    if (!$scope.start || !$scope.end) {\n      return;\n    }\n    ApiService.makeMove({\n      start: $scope.start,\n      end: $scope.end,\n      other: moveOption\n    }, waitForVotes);\n    $scope.moveOptions = [];\n    $scope.voted = true;\n    $scope.showStart = $scope.start;\n    $scope.showEnd = $scope.end;\n  }\n  \n  $scope.chooseColor = function(x, y){\n    var result = (x % 2 == y % 2) ? \"square-white\" : \"square-black\";\n    if ($scope.showStart == convertFormat(x, y) || $scope.showEnd == convertFormat(x, y)) {\n      return \"square-selected\";\n    }\n    if (!$scope.start || $scope.voted) {\n      return result;\n    }\n    var index = -1;\n    for (var i = 0; i < $scope.availableMoves.length; i++) {\n      if ($scope.availableMoves[i].start == $scope.start) {\n        index = i;\n        break;\n      }\n    }\n    if (index == -1) {\n      return result;\n    }\n    for (var i = 0; i < $scope.availableMoves[index].end.length; i++) {\n      var coord = toArrayCoordinates($scope.availableMoves[index].end[i]);\n      if ((x - 1) == coord.x && (y - 1) == coord.y) {\n        return result += \"-valid\";\n      }\n    }\n    return result += \"-invalid\";\n  }\n  \n  $scope.turnMessage = function(){\n    var colorOfTurn = ($scope.moveNum % 2 == 0) ? \"black\" : \"white\";\n    if (colorOfTurn == $scope.color) {\n      return \"Your turn.\";\n    }\n    return \"Opponent's turn.\";\n  }\n  \n  $scope.notateMove = function(vote){\n    if (vote.other) {\n      return vote.start + \"-\" + vote.end + \": \" + vote.other;\n    }\n    return vote.start + \"-\" + vote.end;\n  }\n  \n  $scope.showMove = function(move){\n    $scope.showStart = move.start;\n    $scope.showEnd = move.end;\n  }\n  \n  $scope.showYourMove = function(){\n    $scope.showStart = $scope.start;\n    $scope.showEnd = $scope.end;\n  }\n  \n  $scope.voteHighlighter = function(move){\n    if (move.start == $scope.start && move.end == $scope.end) {\n      return \"yourVote\";\n    }\n    return \"highlight\";\n  }\n}]);\n\nMyApp.directive(\"navTop\", function() {\n  return {\n    templateUrl: \"templates/layout-directives/nav-top2.html\",\n  };\n});\n\nMyApp.directive(\"verticalMenu\", [\"$document\", \"$window\", function($document, $window) {\n  return {\n    templateUrl: \"templates/layout-directives/vertical-menu.html\",\n    link: function(scope, element, attrs) {\n      // var navbar = document.getElementById(\"navbar\");\n      // var menu = element.find(\".fixed-pos\")[0];\n\n      // scope.menuToggle = [\n      //   true,\n      //   true,\n      //   true,\n      //   true,\n      // ];\n\n      // scope.toggleMenu = function(index) {\n      //   scope.menuToggle[index] = !scope.menuToggle[index];\n      // }\n\n      // var resizeMenu = function() {\n      //   var top = navbar.clientHeight - $document.scrollTop();\n      //   if (top < 0) {\n      //     menu.style.top = 0;\n      //   } else {\n      //     menu.style.top = top + 3 + \"px\";\n      //   }\n      // }\n\n      // $window.addEventListener(\"resize\", resizeMenu, true);\n      // $window.addEventListener(\"scroll\", resizeMenu, true);\n\n      // scope.$on(\"$destroy\", function() {\n      //   $window.removeEventListener(\"resize\", resizeMenu, true);\n      //   $window.removeEventListener(\"scroll\", resizeMenu, true);\n      // });\n\n      // resizeMenu();\n    }\n  };\n}]);\n\nMyApp.controller(\"LoginController\", function() {\n\n})\n\nMyApp.controller(\"MainController\", [\"$scope\", function($scope) {\n  $scope.doStuff = function() {\n    return \"stuff\";\n  }\n}])\n\nMyApp.controller(\"OtherController\", [\"$scope\", function($scope) {\n  $scope.filter = true;\n  $scope.toggleFilter = function() {\n    $scope.filter = !$scope.filter;\n  }\n}])\n\nMyApp.controller(\"StuffController\", function() {\n\n})\n"],"sourceRoot":"/source/"}